<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Weazel Eventkalender Generator</title>
    <style>
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #0a0a0a;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
        }
        h1 { margin-top: 0; color: #c92b2b; text-transform: uppercase; letter-spacing: 2px; }
        
        .main-layout {
            display: flex;
            flex: 1;
            gap: 20px;
            overflow: hidden;
        }

        /* Controls */
        .editor-panel {
            width: 400px;
            background-color: #161616;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #888; font-size: 0.9em; }
        input, select, textarea {
            width: 100%;
            background-color: #222;
            border: 1px solid #444;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-family: inherit;
            box-sizing: border-box;
        }
        input:focus, select:focus, textarea:focus { border-color: #c92b2b; outline: none; }

        .btn {
            background-color: #c92b2b;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            margin-top: 10px;
        }
        .btn:hover { background-color: #a01b1b; }
        .btn-sm { padding: 5px 10px; font-size: 0.8em; width: auto; margin-top: 0; }
        .btn-add { background-color: #333; margin-top: 10px; }
        .btn-add:hover { background-color: #444; }

        /* Day Accordion */
        .day-section {
            border: 1px solid #333;
            border-radius: 4px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        .day-header {
            background-color: #222;
            padding: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .day-header:hover { background-color: #2a2a2a; }
        .day-header.active { border-bottom: 1px solid #333; }
        
        .day-content {
            padding: 10px;
            background-color: #1a1a1a;
            display: none;
        }
        .day-content.open { display: block; }

        .event-item {
            background-color: #252525;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            border-left: 3px solid #555;
            position: relative;
        }
        .event-item.highlight { border-left-color: #c92b2b; }
        
        .event-controls {
            display: flex;
            justify-content: flex-end;
            margin-top: 5px;
        }
        .btn-icon { background: none; border: none; color: #888; cursor: pointer; padding: 2px 5px; }
        .btn-icon:hover { color: #fff; }
        .btn-delete:hover { color: #ff5555; }

        /* Preview */
        .preview-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow: hidden;
        }
        .preview-window {
            flex: 1;
            background-color: #121212;
            border: 1px dashed #333;
            padding: 20px;
            overflow-y: auto;
        }
        .output-area {
            height: 150px;
            background-color: #000;
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
        }
        .output-code {
            flex: 1;
            background: transparent;
            border: none;
            color: #a9b7c6;
            font-family: 'Consolas', monospace;
            font-size: 0.85em;
            padding: 10px;
            resize: none;
        }
        .output-controls {
            padding: 5px;
            text-align: right;
            border-top: 1px solid #333;
            background-color: #111;
        }
    </style>
</head>
<body>

    <header style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
        <h1>Eventkalender Generator</h1>
        <a href="index.html" style="color:#888; text-decoration:none; font-size:0.9em; border:1px solid #333; padding:5px 10px; border-radius:4px;">&larr; Zur√ºck</a>
    </header>

    <div class="main-layout">
        <div class="editor-panel">
            <div class="form-group">
                <label>Woche startet am (Montag):</label>
                <input type="date" id="startDate" onchange="updateDates()">
            </div>
            
            <div id="daysContainer">
                <!-- Days will be generated here -->
            </div>
        </div>

        <div class="preview-panel">
            <div class="preview-window">
                <div id="previewContent"> 
                </div>
            </div>

            <div class="output-area">
                <textarea id="outputCode" class="output-code" readonly></textarea>
                <div class="output-controls">
                    <button class="btn btn-sm" onclick="copyCode()">Code Kopieren</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Template for Inputs -->
    <div id="eventFormTemplate" style="display:none;">
        <div class="form-group">
            <input type="text" class="ev-title" placeholder="Titel (z.B. Live DJ)" oninput="updatePreview()">
        </div>
        <div class="form-group">
            <input type="text" class="ev-host" placeholder="Veranstalter" oninput="updatePreview()">
        </div>
        <div class="form-group">
            <input type="text" class="ev-loc" placeholder="Ort" oninput="updatePreview()">
        </div>
        <div style="display:flex; gap:10px;">
            <div class="form-group" style="flex:1;">
                <input type="text" class="ev-time" placeholder="Uhrzeit" oninput="updatePreview()">
            </div>
            <div class="form-group" style="flex:1;">
                <input type="text" class="ev-price" placeholder="Eintritt" oninput="updatePreview()">
            </div>
        </div>
        <div class="form-group">
            <input type="text" class="ev-img" placeholder="Bild URL (Optional)" oninput="updatePreview()">
        </div>
        <div class="form-group" style="display:flex; align-items:center; gap:10px;">
            <input type="checkbox" class="ev-highlight" style="width:auto;" onchange="updatePreview()"> 
            <label style="margin:0; display:inline;">Hervorheben</label>
        </div>
    </div>

    <script>
        // Init data with user provided recurring events
        // 0 = Monday, 6 = Sunday 
        const defaultEvents = {
            0: [
                { title: 'Tequi-La-La Live DJ', host: 'Tequi-La-La', loc: 'Tequi-La-La Vinewood', time: '21:30 - 0:00 Uhr', price: 'free' },
            ],
            1: [
                { title: 'Shamrock Tanzgruppe', host: 'Shamrock', loc: 'Shamrock', time: '20:00 Uhr', price: 'free' }
            ],
            2: [], // Wed
            3: [ // Thu
                { title: 'Tequi-La-La Live DJ', host: 'Tequi-La-La', loc: 'Tequi-La-La Vinewood', time: '21:30 - 0:00 Uhr', price: 'free' },
                { title: 'Shamrock Tanzgruppe', host: 'Shamrock', loc: 'Shamrock', time: '19:00 Uhr', price: 'free' },
                { title: 'Shamrock Late Night Joggen', host: 'Shamrock', loc: 'Shamrock', time: '22:30 Uhr', price: 'free' }
            ],
            4: [ // Fri
                { title: 'Boxkurs (auch f√ºr Einsteiger geeignet)', host: 'Shamrock', loc: 'Shamrock', time: 'ab 19 Uhr (ab 18:30 Einsteigerkurs)', price: '50$' }
            ],
            5: [ // Sat
                { title: 'Shamrock Tanzgruppe', host: 'Shamrock', loc: 'Shamrock', time: '14:30 Uhr', price: 'free' },
                { title: 'Shamrock Aquafitness', host: 'Shamrock', loc: 'Shamrock', time: '16:45 Uhr', price: 'free' }
            ],
            6: [ // Sun
                { title: 'Tequi-La-La Live DJ', host: 'Tequi-La-La', loc: 'Tequi-La-La Vinewood', time: '21:30 - 0:00 Uhr', price: 'free' }
            ]
        };

        const dayNames = ['Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Sonntag'];
        let currentWeekStart = new Date();
        // Adjust to next Monday
        currentWeekStart.setDate(currentWeekStart.getDate() + (1 + 7 - currentWeekStart.getDay()) % 7);
        
        let events = JSON.parse(JSON.stringify(defaultEvents)); // Deep copy

        function init() {
            document.getElementById('startDate').valueAsDate = currentWeekStart;
            renderDays();
            updatePreview();
        }

        function updateDates() {
            const input = document.getElementById('startDate').valueAsDate;
            if (input) {
                currentWeekStart = input;
                // No update logic for day labels in editor needed, but definitely for preview
                renderDays(false); // don't reset inputs
                updatePreview();
            }
        }

        function toggleDay(idx) {
            const dayContent = document.getElementById(`day-content-${idx}`);
            dayContent.classList.toggle('open');
        }

        function renderDays(rebuild = true) {
            const container = document.getElementById('daysContainer');
            if (rebuild) container.innerHTML = '';
            
            let tempDate = new Date(currentWeekStart);

            for (let i = 0; i < 7; i++) {
                const dayDateStr = tempDate.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric' });
                const dayLabel = `${dayNames[i]} (${dayDateStr})`;

                let section = document.getElementById(`day-section-${i}`);
                if (!section) {
                    section = document.createElement('div');
                    section.className = 'day-section';
                    section.id = `day-section-${i}`;
                    
                    section.innerHTML = `
                        <div class="day-header" onclick="toggleDay(${i})">
                            <span>${dayNames[i]} <span id="date-label-${i}" style="color:#888; font-size:0.8em; margin-left:5px;">${dayDateStr}</span></span>
                            <span style="font-size:1.2em;">+</span>
                        </div>
                        <div class="day-content" id="day-content-${i}">
                            <div id="events-list-${i}"></div>
                            <button class="btn btn-add" onclick="addEvent(${i})">Event Hinzuf√ºgen</button>
                        </div>
                    `;
                    container.appendChild(section);
                    renderEvents(i);
                } else {
                    // Update label only
                    document.getElementById(`date-label-${i}`).innerText = dayDateStr;
                }

                tempDate.setDate(tempDate.getDate() + 1);
            }
        }

        function renderEvents(dayIndex) {
            const list = document.getElementById(`events-list-${dayIndex}`);
            list.innerHTML = '';
            
            events[dayIndex].forEach((ev, evIndex) => {
                const el = document.createElement('div');
                el.className = `event-item ${ev.highlight ? 'highlight' : ''}`;
                el.innerHTML = `
                    <div class="form-group">
                        <input type="text" value="${ev.title}" placeholder="Titel" oninput="updateEvent(${dayIndex}, ${evIndex}, 'title', this.value)">
                    </div>
                    <div class="form-group">
                        <input type="text" value="${ev.host}" placeholder="Veranstalter" oninput="updateEvent(${dayIndex}, ${evIndex}, 'host', this.value)">
                    </div>
                    <div style="display:flex; gap:5px;">
                        <input type="text" value="${ev.loc}" placeholder="Ort" style="flex:1" oninput="updateEvent(${dayIndex}, ${evIndex}, 'loc', this.value)">
                        <input type="text" value="${ev.time}" placeholder="Zeit" style="width:80px" oninput="updateEvent(${dayIndex}, ${evIndex}, 'time', this.value)">
                        <input type="text" value="${ev.price}" placeholder="Preis" style="width:80px" oninput="updateEvent(${dayIndex}, ${evIndex}, 'price', this.value)">
                    </div>
                     <div class="form-group" style="margin-top:5px;">
                        <input type="text" value="${ev.img || ''}" placeholder="Bild URL" oninput="updateEvent(${dayIndex}, ${evIndex}, 'img', this.value)">
                    </div>
                    <div class="event-controls">
                        <label style="margin-right:10px;"><input type="checkbox" ${ev.highlight ? 'checked' : ''} onchange="updateEvent(${dayIndex}, ${evIndex}, 'highlight', this.checked)"> Highlight</label>
                        <button class="btn-icon btn-delete" onclick="deleteEvent(${dayIndex}, ${evIndex})">üóëÔ∏è</button>
                    </div>
                `;
                list.appendChild(el);
            });
        }

        function addEvent(dayIndex) {
            events[dayIndex].push({ title: '', host: '', loc: '', time: '', price: '' });
            renderEvents(dayIndex);
            updatePreview();
        }

        function updateEvent(dayIndex, evIndex, field, value) {
            events[dayIndex][evIndex][field] = value;
            if(field === 'highlight') {
                // Re-render to update border color immediately
                renderEvents(dayIndex);
            }
            updatePreview();
        }

        function deleteEvent(dayIndex, evIndex) {
            events[dayIndex].splice(evIndex, 1);
            renderEvents(dayIndex);
            updatePreview();
        }

        function updatePreview() {
            let tempDate = new Date(currentWeekStart);

            const generateDayHtml = (idx) => {
                const dateStr = tempDate.toLocaleDateString('de-DE', { weekday: 'long', day: '2-digit', month: '2-digit', year: 'numeric' });
                const dayEvents = events[idx];
                
                let eventsHtml = '';
                if (dayEvents.length === 0) {
                     eventsHtml = `<div style="margin-bottom: 15px; padding: 15px; background-color: #252525; border-radius: 6px; color:#888; text-align:center; border:1px solid #333;">keine Events</div>`;
                } else {
                    dayEvents.forEach(ev => {
                        const borderStyle = ev.highlight ? 'border-left: 4px solid #c92b2b;' : 'border-left: 4px solid #444;';
                        const imgHtml = ev.img ? `<div style="margin-bottom:12px;"><img src="${ev.img}" style="max-width:100%; border-radius:4px; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>` : '';
                        
                        eventsHtml += `
                        <div style="margin-bottom: 15px; padding: 15px; background-color: #252525; border-radius: 6px; color:#bbb; ${borderStyle} box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
                            ${imgHtml}
                            <div style="color:#fff; font-weight:bold; font-size:1.1em; margin-bottom:8px; border-bottom:1px solid #3a3a3a; padding-bottom:5px;">${ev.title}</div>
                            <div style="line-height:1.6;">
                                <strong style="color:#888;">Veranstalter:</strong> ${ev.host}<br />
                                <strong style="color:#888;">Ort:</strong>&nbsp;${ev.loc}<br />
                                <strong style="color:#888;">Uhrzeit:</strong> ${ev.time}<br />
                                <strong style="color:#888;">Eintritt:</strong> ${ev.price}
                            </div>
                        </div>`;
                    });
                }

                tempDate.setDate(tempDate.getDate() + 1); // Advance date for next call

                return `
                <div style="width: 35%; margin: 10px; padding: 20px; border: 1px solid #333; border-radius: 8px; background-color: #1e1e1e; box-sizing:border-box; flex: 1 1 400px; max-width: 500px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">
                    <p style="margin-top:0; margin-bottom:20px; color:#c92b2b; font-size:1.3em; text-transform:uppercase; letter-spacing:1px; border-bottom:1px solid #333; padding-bottom:10px;"><strong>${dateStr}</strong></p>
                    ${eventsHtml}
                </div>`;
            };


            // START WRAPPER
            let html = `<!-- GRUNDGER√úST (WRAPPER) -->
<div style="position: relative; width: 100%; max-width: 1190px; box-sizing: border-box; margin:0 auto; padding:0; font-family:'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color:#121212; color:#e0e0e0; -webkit-font-smoothing: antialiased;">

  <!-- HAUPT-CONTAINER -->
  <div style="width:90%; max-width:1100px; margin:40px auto;">

    <p style="color:#e0e0e0; font-size:1.1em; text-align:center;"><strong>Der Eventkalender wird von uns auch nach Ver√∂ffentlichung aktualisiert, sofern neue Veranstaltungen innerhalb der Woche dazu kommen, √∂fter reinschauen kann sich also lohnen!&nbsp;</strong></p>
    
    <div style="height:1px; background-color:#333; margin: 20px 0; width:100%;"></div>

    <p style="color:#cccccc; text-align:center;">Planen Sie auch eine Veranstaltung oder Ihre Veranstaltung nicht mit dabei? Dann schreiben Sie&nbsp;Weazel News eine Venture Mail mit allen Informationen zur Veranstaltung.</p>
    
    <div style="height:1px; background-color:#333; margin: 20px 0; width:100%;"></div>
    <br />
`;

            // Reset tempDate for loop
            tempDate = new Date(currentWeekStart);
            
            // Mo & Di
            html += `<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">`;
            html += generateDayHtml(0); // Mo
            html += generateDayHtml(1); // Di
            html += `</div>`;

            // Mi & Do
            html += `<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">`;
            html += generateDayHtml(2); // Mi
            html += generateDayHtml(3); // Do
            html += `</div>`;

             // Fr & Sa
            html += `<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">`;
            html += generateDayHtml(4); // Fr
            html += generateDayHtml(5); // Sa
            html += `</div>`;

            // So
            html += `<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">`;
            html += generateDayHtml(6); // So
            html += `</div>`;

            html += `
    <div style="height:1px; background-color:#333; margin: 40px 0; width:100%;"></div>
    <p style="font-size:0.9em; color:#888; text-align:center;">Alle Angaben ohne Gew√§hr. Kurzfristige √Ñnderungen sind beim Veranstalter zu erfahren. Ihr Event ist nicht dabei? Melden Sie sich gerne per VentureMail direkt bei&nbsp;Weazel News um Ihre Veranstaltung anzumelden.</p>

  </div> <!-- END HAUPT-CONTAINER -->

  <!-- FOOTER -->
  <div style="width:100%; padding:30px 0; background-color:#161616; border-top:1px solid #333; text-align:center; color:#666; font-size:0.9em; margin-top:60px;">
    <p style="margin:0 0 10px 0;">¬© 2026 Weazel News. Alle Rechte vorbehalten.</p>
    <div style="margin-top:10px;">
      <span style="margin:0 10px; cursor:pointer; color:#888;">Sie haben Fragen, Anregungen oder Kritik an unser Weazel News Team? Melden Sie sich gerne bei uns unter unserer Hotline 444 222 oder per VentureMail direkt an Weazel News.</span>
    </div>
  </div>

</div> <!-- END WRAPPER -->`;

            document.getElementById('previewContent').innerHTML = html;
            document.getElementById('outputCode').value = html;
        }

        function copyCode() {
            const copyText = document.getElementById("outputCode");
            copyText.select();
            document.execCommand("copy");
        }

        init();
    </script>
</body>
</html>
